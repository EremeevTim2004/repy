Показатель сбалансированности в дальнейшем будем интерпретировать
как разность между высотой левого и правого поддерева,
а алгоритм будет основаться на типе TAVLTree, описанном выше.
Непосредственно при вставке (листу) присваивается нулевой баланс.
Процесс включения вершины состоит из трех частей:

\input{AddAlgorithm/list1.tex}

Расширим список параметров обычной процедуры вставки параметром-переменной flag,
означающим, что высота дерева увеличилась.
Предположим, что процесс из левой ветви возвращается к родителю (рекурсия идет назад),
тогда возможны три случая:
{ $ $ "--- высота левого поддерева, $ $- высота правого поддерева }
Включение вершины в левое поддерево приведет к

\input{AddAlgorithm/list2.tex}

В третьей ситуации требуется определить балансировку левого поддерева.
Если левое поддерево этой вершины ($Tree^.left^.left$) выше правого ($Tree^.left^.right$),
то требуется большое правое вращение, иначе хватит малого правого.
Аналогичные (симметричные) рассуждения можно привести и для включение в правое поддерево.
Процедура вставки, предложенная Н.Виртом

%листинг